<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Group Finder - EduAgents</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.3/echarts.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --sage-green: #7C9885;
            --warm-orange: #E8A87C;
            --soft-blue: #A8DADC;
            --cream-white: #F1FAEE;
            --charcoal-gray: #457B9D;
            --light-gray: #E9ECEF;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, var(--cream-white) 0%, #E8F4F8 100%);
            min-height: 100vh;
        }
        
        .student-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .student-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .student-card.matched {
            border: 2px solid var(--sage-green);
            background: linear-gradient(135deg, rgba(124, 152, 133, 0.05), rgba(168, 218, 220, 0.05));
        }
        
        .compatibility-score {
            background: conic-gradient(from 0deg, #EF4444 0deg, #F59E0B 72deg, #10B981 144deg, var(--sage-green) 288deg, var(--sage-green) 360deg);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .compatibility-score::before {
            content: '';
            position: absolute;
            width: 46px;
            height: 46px;
            background: white;
            border-radius: 50%;
        }
        
        .compatibility-score span {
            position: relative;
            z-index: 1;
            font-weight: bold;
            font-size: 14px;
            color: var(--charcoal-gray);
        }
        
        .study-session-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-left: 4px solid var(--soft-blue);
            transition: all 0.3s ease;
        }
        
        .study-session-card:hover {
            transform: translateX(4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .match-visualization {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            min-height: 400px;
            position: relative;
        }
        
        .skill-tag {
            background: rgba(124, 152, 133, 0.1);
            color: var(--sage-green);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .learning-style-badge {
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .visual { background: rgba(59, 130, 246, 0.1); color: #3B82F6; }
        .auditory { background: rgba(168, 85, 247, 0.1); color: #A855F7; }
        .kinesthetic { background: rgba(16, 185, 129, 0.1); color: #10B981; }
        .reading { background: rgba(245, 158, 11, 0.1); color: #F59E0B; }
        
        .availability-slot {
            background: rgba(168, 218, 220, 0.1);
            border: 1px solid var(--soft-blue);
            border-radius: 8px;
            padding: 8px 12px;
            text-align: center;
            font-size: 12px;
            transition: all 0.3s ease;
        }
        
        .availability-slot:hover {
            background: var(--soft-blue);
            color: white;
        }
        
        .availability-slot.selected {
            background: var(--sage-green);
            color: white;
            border-color: var(--sage-green);
        }
        
        .nav-link {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .nav-link:hover {
            color: var(--sage-green);
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--sage-green);
            transition: width 0.3s ease;
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        .floating-match-btn {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--sage-green), var(--soft-blue));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            z-index: 40;
        }
        
        .floating-match-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.3);
        }
        
        .connection-line {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg, var(--sage-green), var(--warm-orange));
            opacity: 0.6;
            animation: pulse-connection 2s ease-in-out infinite;
        }
        
        @keyframes pulse-connection {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }
        
        .group-effectiveness-chart {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }
        
        .session-type-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 12px;
        }
        
        .session-type-card {
            background: white;
            border: 2px solid #E5E7EB;
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .session-type-card:hover {
            border-color: var(--sage-green);
            background: rgba(124, 152, 133, 0.05);
        }
        
        .session-type-card.selected {
            border-color: var(--sage-green);
            background: rgba(124, 152, 133, 0.1);
        }
        
        .subject-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 8px;
        }
        
        .subject-tag {
            background: white;
            border: 1px solid #E5E7EB;
            border-radius: 16px;
            padding: 6px 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
        }
        
        .subject-tag:hover {
            border-color: var(--sage-green);
            background: rgba(124, 152, 133, 0.05);
        }
        
        .subject-tag.selected {
            background: var(--sage-green);
            color: white;
            border-color: var(--sage-green);
        }
    </style>
<base target="_blank">
</head>
<body>
    <!-- Navigation -->
    <nav class="bg-white/90 backdrop-blur-md border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-8">
                    <div class="flex items-center space-x-3">
                        <div class="w-8 h-8 bg-gradient-to-br from-sage-green to-soft-blue rounded-lg flex items-center justify-center">
                            <span class="text-white font-bold text-sm">AI</span>
                        </div>
                        <span class="text-xl font-bold text-charcoal-gray">EduAgents</span>
                    </div>
                    <div class="hidden md:flex space-x-6">
                        <a href="index.html" class="nav-link text-gray-600">Dashboard</a>
                        <a href="assignments.html" class="nav-link text-gray-600">Assignments</a>
                        <a href="research.html" class="nav-link text-gray-600">Research</a>
                        <a href="study-groups.html" class="nav-link text-charcoal-gray font-medium">Study Groups</a>
                        <a href="transfer.html" class="nav-link text-gray-600">Transfer</a>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="text-sm text-charcoal-gray">
                        üë• <span id="match-count">12</span> Potential Matches
                    </div>
                    <div class="w-8 h-8 bg-gradient-to-br from-warm-orange to-sage-green rounded-full"></div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Header Section -->
    <section class="bg-gradient-to-r from-purple-50 to-pink-50 py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <h1 class="text-4xl font-bold text-charcoal-gray mb-4">Study Group Finder</h1>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                    Connect with compatible study partners using our intelligent matching algorithm. 
                    Find peers who share your learning style, schedule, and academic goals.
                </p>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            
            <!-- Left Column: Your Profile -->
            <div class="space-y-6">
                
                <!-- Profile Builder -->
                <div class="bg-white rounded-xl shadow-sm p-6">
                    <h2 class="text-xl font-bold text-charcoal-gray mb-4">üéØ Your Study Profile</h2>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Subjects</label>
                            <div class="subject-selector">
                                <div class="subject-tag selected" data-subject="mathematics">Mathematics</div>
                                <div class="subject-tag selected" data-subject="chemistry">Chemistry</div>
                                <div class="subject-tag" data-subject="physics">Physics</div>
                                <div class="subject-tag" data-subject="biology">Biology</div>
                                <div class="subject-tag" data-subject="history">History</div>
                                <div class="subject-tag" data-subject="english">English</div>
                                <div class="subject-tag" data-subject="computer-science">Computer Science</div>
                                <div class="subject-tag" data-subject="psychology">Psychology</div>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Learning Style</label>
                            <select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="visual">Visual Learner</option>
                                <option value="auditory">Auditory Learner</option>
                                <option value="kinesthetic">Kinesthetic Learner</option>
                                <option value="reading">Reading/Writing Learner</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Study Preferences</label>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="checkbox" class="rounded border-gray-300 text-purple-600 focus:ring-purple-500" checked>
                                    <span class="ml-2 text-sm text-gray-700">Morning sessions</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="rounded border-gray-300 text-purple-600 focus:ring-purple-500" checked>
                                    <span class="ml-2 text-sm text-gray-700">Small groups (2-4 people)</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="rounded border-gray-300 text-purple-600 focus:ring-purple-500">
                                    <span class="ml-2 text-sm text-gray-700">Virtual sessions</span>
                                </label>
                            </div>
                        </div>
                        
                        <button onclick="updateProfile()" class="w-full bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700 transition-colors">
                            Update Profile
                        </button>
                    </div>
                </div>
                
                <!-- Availability -->
                <div class="bg-white rounded-xl shadow-sm p-6">
                    <h3 class="text-lg font-bold text-charcoal-gray mb-4">üìÖ Availability</h3>
                    <div class="grid grid-cols-2 gap-2">
                        <div class="availability-slot selected">Mon 2-4 PM</div>
                        <div class="availability-slot selected">Wed 10-12 PM</div>
                        <div class="availability-slot">Fri 3-5 PM</div>
                        <div class="availability-slot selected">Sat 1-3 PM</div>
                        <div class="availability-slot">Sun 11-1 PM</div>
                        <div class="availability-slot">Tue 4-6 PM</div>
                    </div>
                    <p class="text-xs text-gray-500 mt-3">Click to select available time slots</p>
                </div>
                
                <!-- Session Types -->
                <div class="bg-white rounded-xl shadow-sm p-6">
                    <h3 class="text-lg font-bold text-charcoal-gray mb-4">üìö Session Types</h3>
                    <div class="session-type-selector">
                        <div class="session-type-card selected">
                            <div class="text-2xl mb-2">üìù</div>
                            <div class="text-sm font-medium">Note Review</div>
                        </div>
                        <div class="session-type-card selected">
                            <div class="text-2xl mb-2">üß†</div>
                            <div class="text-sm font-medium">Problem Solving</div>
                        </div>
                        <div class="session-type-card">
                            <div class="text-2xl mb-2">üìñ</div>
                            <div class="text-sm font-medium">Reading Group</div>
                        </div>
                        <div class="session-type-card">
                            <div class="text-2xl mb-2">üíª</div>
                            <div class="text-sm font-medium">Project Work</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Center Column: Match Visualization -->
            <div class="match-visualization p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-xl font-bold text-charcoal-gray">ü§ù Compatibility Map</h2>
                    <div class="flex items-center space-x-2">
                        <button onclick="refreshMatches()" class="p-2 hover:bg-gray-100 rounded-lg">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                            </svg>
                        </button>
                        <span class="text-sm text-gray-600">Live Matches</span>
                    </div>
                </div>
                
                <div id="match-canvas" class="relative w-full h-96 bg-gray-50 rounded-lg overflow-hidden">
                    <!-- P5.js canvas will be inserted here -->
                </div>
                
                <div class="mt-4 grid grid-cols-3 gap-4 text-center text-sm">
                    <div>
                        <div class="text-2xl font-bold text-red-500">3</div>
                        <div class="text-gray-600">Low Match</div>
                    </div>
                    <div>
                        <div class="text-2xl font-bold text-yellow-500">5</div>
                        <div class="text-gray-600">Medium Match</div>
                    </div>
                    <div>
                        <div class="text-2xl font-bold text-green-500">4</div>
                        <div class="text-gray-600">High Match</div>
                    </div>
                </div>
            </div>
            
            <!-- Right Column: Study Sessions & Analytics -->
            <div class="space-y-6">
                
                <!-- Upcoming Sessions -->
                <div class="bg-white rounded-xl shadow-sm p-6">
                    <h3 class="text-lg font-bold text-charcoal-gray mb-4">üìÖ Upcoming Sessions</h3>
                    <div class="space-y-3">
                        <div class="study-session-card p-4">
                            <div class="flex items-center justify-between mb-2">
                                <h4 class="font-medium text-sm">Chemistry Study Group</h4>
                                <div class="text-xs bg-green-100 text-green-600 px-2 py-1 rounded">Confirmed</div>
                            </div>
                            <p class="text-xs text-gray-600 mb-2">Tomorrow ‚Ä¢ 2:00 PM - 4:00 PM</p>
                            <div class="flex items-center space-x-2">
                                <div class="flex -space-x-1">
                                    <div class="w-6 h-6 bg-blue-400 rounded-full border-2 border-white"></div>
                                    <div class="w-6 h-6 bg-green-400 rounded-full border-2 border-white"></div>
                                    <div class="w-6 h-6 bg-purple-400 rounded-full border-2 border-white"></div>
                                </div>
                                <span class="text-xs text-gray-500">3 participants</span>
                            </div>
                        </div>
                        
                        <div class="study-session-card p-4">
                            <div class="flex items-center justify-between mb-2">
                                <h4 class="font-medium text-sm">Math Problem Solving</h4>
                                <div class="text-xs bg-yellow-100 text-yellow-600 px-2 py-1 rounded">Pending</div>
                            </div>
                            <p class="text-xs text-gray-600 mb-2">Friday ‚Ä¢ 10:00 AM - 12:00 PM</p>
                            <div class="flex items-center space-x-2">
                                <div class="flex -space-x-1">
                                    <div class="w-6 h-6 bg-red-400 rounded-full border-2 border-white"></div>
                                    <div class="w-6 h-6 bg-yellow-400 rounded-full border-2 border-white"></div>
                                </div>
                                <span class="text-xs text-gray-500">2 participants</span>
                            </div>
                        </div>
                        
                        <div class="study-session-card p-4">
                            <div class="flex items-center justify-between mb-2">
                                <h4 class="font-medium text-sm">Physics Lab Review</h4>
                                <div class="text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded">Scheduled</div>
                            </div>
                            <p class="text-xs text-gray-600 mb-2">Saturday ‚Ä¢ 1:00 PM - 3:00 PM</p>
                            <div class="flex items-center space-x-2">
                                <div class="flex -space-x-1">
                                    <div class="w-6 h-6 bg-indigo-400 rounded-full border-2 border-white"></div>
                                    <div class="w-6 h-6 bg-pink-400 rounded-full border-2 border-white"></div>
                                    <div class="w-6 h-6 bg-teal-400 rounded-full border-2 border-white"></div>
                                    <div class="w-6 h-6 bg-orange-400 rounded-full border-2 border-white"></div>
                                </div>
                                <span class="text-xs text-gray-500">4 participants</span>
                            </div>
                        </div>
                    </div>
                    
                    <button onclick="scheduleSession()" class="w-full mt-4 bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700 transition-colors">
                        Schedule New Session
                    </button>
                </div>
                
                <!-- Top Matches -->
                <div class="bg-white rounded-xl shadow-sm p-6">
                    <h3 class="text-lg font-bold text-charcoal-gray mb-4">‚≠ê Top Matches</h3>
                    <div class="space-y-3">
                        <div class="student-card matched p-4" onclick="showStudentProfile('sarah')">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center text-white font-bold text-sm">
                                    S
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-sm">Sarah Chen</h4>
                                    <p class="text-xs text-gray-600">Chemistry Major ‚Ä¢ 3rd Year</p>
                                    <div class="flex items-center space-x-2 mt-1">
                                        <span class="skill-tag">Organic Chemistry</span>
                                        <span class="skill-tag">Lab Skills</span>
                                    </div>
                                </div>
                                <div class="compatibility-score">
                                    <span>94</span>
                                </div>
                            </div>
                            <div class="mt-3 flex items-center justify-between">
                                <div class="learning-style-badge visual">Visual Learner</div>
                                <div class="text-xs text-gray-500">Matches 3 subjects</div>
                            </div>
                        </div>
                        
                        <div class="student-card matched p-4" onclick="showStudentProfile('alex')">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center text-white font-bold text-sm">
                                    A
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-sm">Alex Rodriguez</h4>
                                    <p class="text-xs text-gray-600">Math Major ‚Ä¢ 2nd Year</p>
                                    <div class="flex items-center space-x-2 mt-1">
                                        <span class="skill-tag">Calculus</span>
                                        <span class="skill-tag">Statistics</span>
                                    </div>
                                </div>
                                <div class="compatibility-score">
                                    <span>87</span>
                                </div>
                            </div>
                            <div class="mt-3 flex items-center justify-between">
                                <div class="learning-style-badge auditory">Auditory Learner</div>
                                <div class="text-xs text-gray-500">Matches 2 subjects</div>
                            </div>
                        </div>
                        
                        <div class="student-card matched p-4" onclick="showStudentProfile('maya')">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-gradient-to-br from-purple-400 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-sm">
                                    M
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-sm">Maya Patel</h4>
                                    <p class="text-xs text-gray-600">Physics Major ‚Ä¢ 3rd Year</p>
                                    <div class="flex items-center space-x-2 mt-1">
                                        <span class="skill-tag">Quantum Physics</span>
                                        <span class="skill-tag">Mathematics</span>
                                    </div>
                                </div>
                                <div class="compatibility-score">
                                    <span>82</span>
                                </div>
                            </div>
                            <div class="mt-3 flex items-center justify-between">
                                <div class="learning-style-badge kinesthetic">Kinesthetic Learner</div>
                                <div class="text-xs text-gray-500">Matches 2 subjects</div>
                            </div>
                        </div>
                    </div>
                    
                    <button onclick="viewAllMatches()" class="w-full mt-4 bg-gray-200 text-charcoal-gray py-2 rounded-lg hover:bg-gray-300 transition-colors">
                        View All Matches
                    </button>
                </div>
                
                <!-- Group Effectiveness -->
                <div class="group-effectiveness-chart">
                    <h3 class="text-lg font-bold text-charcoal-gray mb-4">üìä Group Analytics</h3>
                    <div id="effectiveness-chart" style="height: 200px;"></div>
                    
                    <div class="mt-4 space-y-3">
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600">Average Session Rating</span>
                            <span class="font-semibold text-green-600">4.8/5.0</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600">Study Hours This Week</span>
                            <span class="font-semibold text-blue-600">12.5 hours</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600">Groups Joined</span>
                            <span class="font-semibold text-purple-600">3 groups</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600">Success Rate</span>
                            <span class="font-semibold text-orange-600">94%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating Match Button -->
    <div class="floating-match-btn" onclick="findMatches()">
        ü§ù
    </div>

    <!-- Footer -->
    <footer class="bg-charcoal-gray text-white py-12 mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <div class="flex items-center justify-center space-x-3 mb-4">
                    <div class="w-10 h-10 bg-gradient-to-br from-sage-green to-soft-blue rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold">AI</span>
                    </div>
                    <span class="text-2xl font-bold">EduAgents</span>
                </div>
                <p class="text-white/80 mb-6">Empowering academic success through collaborative AI intelligence</p>
                <div class="flex justify-center space-x-6 text-sm text-white/60">
                    <span>¬© 2025 Adaptive Student Coaching Agents</span>
                    <span>‚Ä¢</span>
                    <span>Built with Multi-Agent Collaboration</span>
                    <span>‚Ä¢</span>
                    <span>Powered by Gemini LLM</span>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Study group finder functionality
        let students = [
            {
                id: 'sarah',
                name: 'Sarah Chen',
                major: 'Chemistry',
                year: '3rd Year',
                compatibility: 94,
                subjects: ['chemistry', 'mathematics'],
                learningStyle: 'visual',
                skills: ['Organic Chemistry', 'Lab Skills'],
                avatar: 'blue'
            },
            {
                id: 'alex',
                name: 'Alex Rodriguez',
                major: 'Mathematics',
                year: '2nd Year',
                compatibility: 87,
                subjects: ['mathematics', 'physics'],
                learningStyle: 'auditory',
                skills: ['Calculus', 'Statistics'],
                avatar: 'green'
            },
            {
                id: 'maya',
                name: 'Maya Patel',
                major: 'Physics',
                year: '3rd Year',
                compatibility: 82,
                subjects: ['physics', 'mathematics'],
                learningStyle: 'kinesthetic',
                skills: ['Quantum Physics', 'Mathematics'],
                avatar: 'purple'
            },
            {
                id: 'jordan',
                name: 'Jordan Kim',
                major: 'Biology',
                year: '2nd Year',
                compatibility: 76,
                subjects: ['biology', 'chemistry'],
                learningStyle: 'visual',
                skills: ['Cell Biology', 'Genetics'],
                avatar: 'pink'
            },
            {
                id: 'casey',
                name: 'Casey Thompson',
                major: 'Computer Science',
                year: '4th Year',
                compatibility: 71,
                subjects: ['computer-science', 'mathematics'],
                learningStyle: 'kinesthetic',
                skills: ['Programming', 'Algorithms'],
                avatar: 'indigo'
            }
        ];

        let matchVisualization = null;
        let selectedSubjects = ['mathematics', 'chemistry'];

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            initializeMatchVisualization();
            initializeSubjectSelector();
            initializeAvailabilitySelector();
            initializeSessionTypeSelector();
            initializeEffectivenessChart();
            animateElements();
        });

        // Initialize match visualization with P5.js
        function initializeMatchVisualization() {
            const canvas = document.getElementById('match-canvas');
            
            const sketch = (p) => {
                let nodes = [];
                let connections = [];
                let userNode = null;
                
                p.setup = () => {
                    p.createCanvas(canvas.offsetWidth, canvas.offsetHeight);
                    
                    // Create user node at center
                    userNode = {
                        x: p.width / 2,
                        y: p.height / 2,
                        size: 20,
                        color: p.color(124, 152, 133),
                        name: 'You'
                    };
                    
                    // Create student nodes around user
                    students.forEach((student, index) => {
                        const angle = (index / students.length) * p.TWO_PI;
                        const distance = 80 + (student.compatibility / 100) * 100;
                        
                        nodes.push({
                            x: userNode.x + p.cos(angle) * distance,
                            y: userNode.y + p.sin(angle) * distance,
                            size: 12 + (student.compatibility / 100) * 8,
                            color: getCompatibilityColor(student.compatibility),
                            student: student,
                            pulse: 0
                        });
                    });
                };
                
                p.draw = () => {
                    p.clear();
                    
                    // Draw connections
                    nodes.forEach(node => {
                        const distance = p.dist(userNode.x, userNode.y, node.x, node.y);
                        const alpha = p.map(node.student.compatibility, 0, 100, 50, 200);
                        
                        p.stroke(124, 152, 133, alpha);
                        p.strokeWeight(2);
                        p.line(userNode.x, userNode.y, node.x, node.y);
                    });
                    
                    // Draw user node
                    p.fill(userNode.color);
                    p.noStroke();
                    p.ellipse(userNode.x, userNode.y, userNode.size);
                    
                    p.fill(255);
                    p.textAlign(p.CENTER, p.CENTER);
                    p.textSize(10);
                    p.text('YOU', userNode.x, userNode.y);
                    
                    // Draw student nodes
                    nodes.forEach(node => {
                        node.pulse += 0.05;
                        const pulseSize = node.size + p.sin(node.pulse) * 2;
                        
                        p.fill(node.color);
                        p.noStroke();
                        p.ellipse(node.x, node.y, pulseSize);
                        
                        // Add compatibility score
                        p.fill(255);
                        p.textAlign(p.CENTER, p.CENTER);
                        p.textSize(8);
                        p.text(node.student.compatibility, node.x, node.y);
                    });
                };
                
                p.mousePressed = () => {
                    // Check if clicked on a student node
                    nodes.forEach(node => {
                        const distance = p.dist(p.mouseX, p.mouseY, node.x, node.y);
                        if (distance < node.size / 2) {
                            showStudentProfile(node.student.id);
                        }
                    });
                };
                
                p.windowResized = () => {
                    p.resizeCanvas(canvas.offsetWidth, canvas.offsetHeight);
                };
            };
            
            matchVisualization = new p5(sketch, canvas);
        }

        function getCompatibilityColor(score) {
            if (score >= 80) return [16, 185, 129]; // Green
            if (score >= 60) return [245, 158, 11]; // Yellow
            return [239, 68, 68]; // Red
        }

        // Initialize subject selector
        function initializeSubjectSelector() {
            const subjectTags = document.querySelectorAll('.subject-tag');
            subjectTags.forEach(tag => {
                tag.addEventListener('click', function() {
                    const subject = this.dataset.subject;
                    
                    if (this.classList.contains('selected')) {
                        this.classList.remove('selected');
                        selectedSubjects = selectedSubjects.filter(s => s !== subject);
                    } else {
                        this.classList.add('selected');
                        selectedSubjects.push(subject);
                    }
                    
                    updateMatches();
                });
            });
        }

        // Initialize availability selector
        function initializeAvailabilitySelector() {
            const slots = document.querySelectorAll('.availability-slot');
            slots.forEach(slot => {
                slot.addEventListener('click', function() {
                    this.classList.toggle('selected');
                    updateMatches();
                });
            });
        }

        // Initialize session type selector
        function initializeSessionTypeSelector() {
            const cards = document.querySelectorAll('.session-type-card');
            cards.forEach(card => {
                card.addEventListener('click', function() {
                    this.classList.toggle('selected');
                    updateMatches();
                });
            });
        }

        // Initialize effectiveness chart
        function initializeEffectivenessChart() {
            const chartDom = document.getElementById('effectiveness-chart');
            const myChart = echarts.init(chartDom);
            
            const option = {
                tooltip: {
                    trigger: 'axis'
                },
                xAxis: {
                    type: 'category',
                    data: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                    axisLine: { show: false },
                    axisTick: { show: false }
                },
                yAxis: {
                    type: 'value',
                    max: 100,
                    axisLine: { show: false },
                    axisTick: { show: false },
                    splitLine: { 
                        lineStyle: { color: '#E5E7EB' }
                    }
                },
                series: [{
                    name: 'Study Effectiveness',
                    data: [78, 85, 92, 94],
                    type: 'line',
                    smooth: true,
                    lineStyle: {
                        color: '#7C9885',
                        width: 3
                    },
                    itemStyle: {
                        color: '#7C9885'
                    },
                    areaStyle: {
                        color: {
                            type: 'linear',
                            x: 0,
                            y: 0,
                            x2: 0,
                            y2: 1,
                            colorStops: [{
                                offset: 0, color: 'rgba(124, 152, 133, 0.3)'
                            }, {
                                offset: 1, color: 'rgba(124, 152, 133, 0.05)'
                            }]
                        }
                    }
                }],
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    top: '10%',
                    containLabel: true
                }
            };
            
            myChart.setOption(option);
        }

        // Update matches based on profile changes
        function updateMatches() {
            showNotification('üîÑ Updating compatibility matches...', 'info');
            
            setTimeout(() => {
                // Recalculate compatibility scores
                students.forEach(student => {
                    const commonSubjects = student.subjects.filter(subject => 
                        selectedSubjects.includes(subject)
                    ).length;
                    
                    student.compatibility = Math.min(100, 
                        50 + (commonSubjects * 15) + Math.random() * 20
                    );
                });
                
                // Sort by compatibility
                students.sort((a, b) => b.compatibility - a.compatibility);
                
                // Update UI
                updateMatchCount();
                updateTopMatches();
                
                showNotification('‚úÖ Matches updated! Found new compatible study partners.', 'success');
            }, 1500);
        }

        // Update match count
        function updateMatchCount() {
            const highMatches = students.filter(s => s.compatibility >= 80).length;
            const mediumMatches = students.filter(s => s.compatibility >= 60 && s.compatibility < 80).length;
            const lowMatches = students.filter(s => s.compatibility < 60).length;
            
            document.getElementById('match-count').textContent = students.length;
            
            // Update visualization stats
            const statsContainer = document.querySelector('.grid.grid-cols-3');
            statsContainer.innerHTML = `
                <div>
                    <div class="text-2xl font-bold text-red-500">${lowMatches}</div>
                    <div class="text-gray-600">Low Match</div>
                </div>
                <div>
                    <div class="text-2xl font-bold text-yellow-500">${mediumMatches}</div>
                    <div class="text-gray-600">Medium Match</div>
                </div>
                <div>
                    <div class="text-2xl font-bold text-green-500">${highMatches}</div>
                    <div class="text-gray-600">High Match</div>
                </div>
            `;
        }

        // Update top matches display
        function updateTopMatches() {
            const container = document.querySelector('.space-y-3');
            container.innerHTML = '';
            
            students.slice(0, 3).forEach((student, index) => {
                const studentCard = document.createElement('div');
                studentCard.className = 'student-card matched p-4';
                studentCard.onclick = () => showStudentProfile(student.id);
                
                const colors = {
                    blue: 'from-blue-400 to-blue-600',
                    green: 'from-green-400 to-green-600',
                    purple: 'from-purple-400 to-purple-600',
                    pink: 'from-pink-400 to-pink-600',
                    indigo: 'from-indigo-400 to-indigo-600'
                };
                
                studentCard.innerHTML = `
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-gradient-to-br ${colors[student.avatar]} rounded-full flex items-center justify-center text-white font-bold text-sm">
                            ${student.name.charAt(0)}
                        </div>
                        <div class="flex-1">
                            <h4 class="font-medium text-sm">${student.name}</h4>
                            <p class="text-xs text-gray-600">${student.major} Major ‚Ä¢ ${student.year}</p>
                            <div class="flex items-center space-x-2 mt-1">
                                ${student.skills.map(skill => `<span class="skill-tag">${skill}</span>`).join('')}
                            </div>
                        </div>
                        <div class="compatibility-score">
                            <span>${Math.round(student.compatibility)}</span>
                        </div>
                    </div>
                    <div class="mt-3 flex items-center justify-between">
                        <div class="learning-style-badge ${student.learningStyle}">${student.learningStyle.charAt(0).toUpperCase() + student.learningStyle.slice(1)} Learner</div>
                        <div class="text-xs text-gray-500">Matches ${student.subjects.filter(s => selectedSubjects.includes(s)).length} subjects</div>
                    </div>
                `;
                
                container.appendChild(studentCard);
                
                // Animate card appearance
                anime({
                    targets: studentCard,
                    translateY: [20, 0],
                    opacity: [0, 1],
                    duration: 500,
                    delay: index * 200,
                    easing: 'easeOutQuart'
                });
            });
        }

        // Profile and interaction functions
        function updateProfile() {
            showNotification('üîÑ Updating your study profile...', 'info');
            
            setTimeout(() => {
                updateMatches();
                showNotification('‚úÖ Profile updated! Finding better matches for you.', 'success');
            }, 1000);
        }

        function showStudentProfile(studentId) {
            const student = students.find(s => s.id === studentId);
            if (!student) return;
            
            const modal = createModal(student.name, `
                <div class="space-y-4">
                    <div class="flex items-center space-x-4">
                        <div class="w-16 h-16 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center text-white font-bold text-xl">
                            ${student.name.charAt(0)}
                        </div>
                        <div>
                            <h3 class="font-bold text-lg">${student.name}</h3>
                            <p class="text-gray-600">${student.major} Major ‚Ä¢ ${student.year}</p>
                            <div class="learning-style-badge ${student.learningStyle} mt-2">
                                ${student.learningStyle.charAt(0).toUpperCase() + student.learningStyle.slice(1)} Learner
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="font-semibold text-charcoal-gray mb-2">Skills & Strengths</h4>
                        <div class="flex flex-wrap gap-2">
                            ${student.skills.map(skill => `<span class="skill-tag">${skill}</span>`).join('')}
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="font-semibold text-charcoal-gray mb-2">Shared Subjects</h4>
                        <div class="flex flex-wrap gap-2">
                            ${student.subjects.filter(subject => selectedSubjects.includes(subject)).map(subject => 
                                `<span class="bg-green-100 text-green-600 px-2 py-1 rounded text-xs">${subject}</span>`
                            ).join('')}
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-sage-green to-soft-blue p-4 rounded-lg text-white">
                        <div class="text-center">
                            <div class="text-3xl font-bold">${Math.round(student.compatibility)}%</div>
                            <div class="text-sm opacity-90">Compatibility Score</div>
                        </div>
                    </div>
                    
                    <div class="flex space-x-3">
                        <button onclick="sendConnectionRequest('${student.id}')" class="flex-1 bg-sage-green text-white py-2 rounded-lg hover:bg-opacity-90 transition-colors">
                            Connect
                        </button>
                        <button onclick="scheduleWithStudent('${student.id}')" class="flex-1 bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700 transition-colors">
                            Study Together
                        </button>
                        <button onclick="closeModal()" class="flex-1 bg-gray-200 text-charcoal-gray py-2 rounded-lg hover:bg-gray-300 transition-colors">
                            Close
                        </button>
                    </div>
                </div>
            `);
            document.body.appendChild(modal);
        }

        function sendConnectionRequest(studentId) {
            const student = students.find(s => s.id === studentId);
            showNotification(`ü§ù Connection request sent to ${student.name}!`, 'success');
            closeModal();
        }

        function scheduleWithStudent(studentId) {
            const student = students.find(s => s.id === studentId);
            showNotification(`üìÖ Study session request sent to ${student.name}!`, 'success');
            closeModal();
        }

        function findMatches() {
            showNotification('üîç Finding new study group matches...', 'info');
            
            setTimeout(() => {
                updateMatches();
                showNotification('‚úÖ Found new matches! Check your compatibility map.', 'success');
            }, 2000);
        }

        function refreshMatches() {
            showNotification('üîÑ Refreshing compatibility data...', 'info');
            
            setTimeout(() => {
                updateMatches();
                showNotification('‚úÖ Matches refreshed with latest data!', 'success');
            }, 1500);
        }

        function scheduleSession() {
            const modal = createModal('Schedule Study Session', `
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Session Title</label>
                        <input type="text" placeholder="e.g., Chemistry Chapter 5 Review" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Date & Time</label>
                        <input type="datetime-local" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Duration</label>
                        <select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <option>1 hour</option>
                            <option>1.5 hours</option>
                            <option>2 hours</option>
                            <option>3 hours</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Max Participants</label>
                        <select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <option>2 people</option>
                            <option>3 people</option>
                            <option>4 people</option>
                            <option>5+ people</option>
                        </select>
                    </div>
                    <button onclick="createSession()" class="w-full bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700 transition-colors">
                        Create Session
                    </button>
                </div>
            `);
            document.body.appendChild(modal);
        }

        function createSession() {
            showNotification('‚úÖ Study session created successfully!', 'success');
            closeModal();
        }

        function viewAllMatches() {
            const modal = createModal('All Study Partners', `
                <div class="space-y-4 max-h-96 overflow-y-auto">
                    ${students.map(student => `
                        <div class="student-card p-4 cursor-pointer" onclick="showStudentProfile('${student.id}')">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center text-white font-bold">
                                    ${student.name.charAt(0)}
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium">${student.name}</h4>
                                    <p class="text-sm text-gray-600">${student.major} Major ‚Ä¢ ${student.year}</p>
                                    <div class="flex items-center space-x-2 mt-1">
                                        ${student.skills.map(skill => `<span class="skill-tag">${skill}</span>`).join('')}
                                    </div>
                                </div>
                                <div class="text-center">
                                    <div class="text-lg font-bold text-green-600">${Math.round(student.compatibility)}%</div>
                                    <div class="text-xs text-gray-500">Match</div>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `);
            document.body.appendChild(modal);
        }

        // Utility functions
        function animateElements() {
            anime({
                targets: '.student-card, .study-session-card, .session-type-card',
                translateY: [20, 0],
                opacity: [0, 1],
                delay: anime.stagger(100),
                duration: 600,
                easing: 'easeOutQuart'
            });
        }

        function createModal(title, content) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-xl p-6 max-w-md w-full mx-4 max-h-96 overflow-y-auto">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold text-charcoal-gray">${title}</h3>
                        <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                    ${content}
                </div>
            `;
            return modal;
        }

        function closeModal() {
            const modal = document.querySelector('.fixed.inset-0');
            if (modal) {
                anime({
                    targets: modal,
                    opacity: [1, 0],
                    duration: 200,
                    easing: 'easeInQuart',
                    complete: () => {
                        modal.remove();
                    }
                });
            }
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            const colors = {
                success: 'bg-green-500',
                error: 'bg-red-500',
                info: 'bg-blue-500',
                warning: 'bg-yellow-500'
            };
            
            notification.className = `fixed top-4 right-4 ${colors[type]} text-white px-6 py-3 rounded-lg shadow-lg z-50 transform translate-x-full`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            anime({
                targets: notification,
                translateX: [300, 0],
                duration: 500,
                easing: 'easeOutQuart'
            });
            
            setTimeout(() => {
                anime({
                    targets: notification,
                    translateX: [0, 300],
                    duration: 300,
                    easing: 'easeInQuart',
                    complete: () => {
                        notification.remove();
                    }
                });
            }, 4000);
        }

        // Global function exports
        window.updateProfile = updateProfile;
        window.showStudentProfile = showStudentProfile;
        window.sendConnectionRequest = sendConnectionRequest;
        window.scheduleWithStudent = scheduleWithStudent;
        window.findMatches = findMatches;
        window.refreshMatches = refreshMatches;
        window.scheduleSession = scheduleSession;
        window.createSession = createSession;
        window.viewAllMatches = viewAllMatches;
        window.closeModal = closeModal;
    </script>
</body>
</html>